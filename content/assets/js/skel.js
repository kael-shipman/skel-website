typeof Skel=="undefined"&&(Skel={}),Skel.Utils={merge:function(e,t){if(e instanceof Object&&t instanceof Object){for(var n in t)!!e[n]&&t[n]instanceof Object?Skel.Utils.merge(e[n],t[n]):e[n]=t[n];return e}throw"Target and Source must both be plain objects in mergeOptions"},transitionDisplay:function(e,t){t=Skel.Utils.merge({activeClass:"active",disappearDelay:500,appearDelay:20,onAppear:null,onDisappear:null},t||{}),classes=e.classList,classes.contains(t.activeClass)?(classes.remove(t.activeClass),setTimeout(function(){e.style.display="",t.onDisappear&&t.onDisappear()},t.disappearDelay)):(e.style.display="block",setTimeout(function(){classes.add(t.activeClass),t.onAppear&&t.onAppear()},t.appearDelay))},convertEmailAddresses:function(e){e=Skel.Utils.merge({targClass:"email-address",addrAttr:"data-email",subjAttr:"data-subject",transFunction:function(e){return e.replace("-(AT)-","@").replace(/-\(DOT\)-/g,".")}},e||{});var t=document.getElementsByClassName(e.targClass);for(var n=0;n<t.length;n++){if(t[n].email_address_processed)return!0;t[n].email_address_processed=!0;var r=t[n].innerHTML,i=t[n].getAttribute(e.addrAttr),s=t[n].getAttribute(e.subjAttr);i?i=e.transFunction(i):(i=e.transFunction(r),r=i),t[n].innerHTML='<a href="mailto:'+i+'?subject="'+encodeURIComponent(s)+'">'+r+"</a>"}},loadMenuActivator:function(e){e=Skel.Utils.merge({activatorClass:"menu-activator",menuContainerClass:"main-menu",menuItemsContainerClass:"menu",activeClass:"active",activatorFunction:function(t,n){var r=t.target.parentNode;while(!r.classList.contains(n.menuContainerClass)&&r.tagName!="body")r=r.parentNode;var i=r.getElementsByClassName(n.menuItemsContainerClass);for(var s=0;s<i.length;s++)Skel.Utils.transitionDisplay(i[s],e)}},e||{});var t=document.getElementsByClassName(e.activatorClass);for(var n=0;n<t.length;n++)t[n].addEventListener("click",function(t){e.activatorFunction(t,e)})},loadOnpageNavigation:function(e){e=Skel.Utils.merge({linkClass:"onpage-nav",menuToggleFunction:!1},e||{});var t=document.getElementsByClassName(e.linkClass);for(var n=0;n<t.length;n++){if(t[n].onpageNavLoaded)continue;t[n].onpageNavLoaded=!0,t[n].addEventListener("click",function(t){e.menuToggleFunction&&e.menuToggleFunction(t);var n,r,i=window.location.pathname,s=t.target.pathname;if(!t.target.hash||s!=i)return!0;n=t.target.hash.substring(1),r=document.getElementsByName(n);if(r.length==0)return;r=r[0],Skel.Utils.scrollToElement(r),history.replaceState({},r.getAttribute("data-page_title"),"#"+n),t.preventDefault()})}},scrollToElement:function(e){var t=Skel.Utils.elementOffset(e).top-100;t<0&&(t=0);var n=document.documentElement.scrollTop||document.body.scrollTop,r=new Skel.SimpleAnimator;r.animate(function(e){n<t?window.scrollTo(0,n*1+(t-n)*e):window.scrollTo(0,n*1-(n-t)*e)})},elementOffset:function(e){var t=e.getBoundingClientRect(),n=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,r=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,i=document.documentElement.clientTop||document.body.clientTop||0,s=document.documentElement.clientLeft||document.body.clientLeft||0,o=t.top+n-i,u=t.left+r-s;return{top:Math.round(o),left:Math.round(u)}},createFullscreenApi:function(e){var t={};return document.fullscreenElement?t.fullscreenElement=document.fullscreenElement:document.webkitFullscreenElement?t.fullscreenElement=document.webkitFullscreenElement:document.mozFullScreenElement?t.fullscreenElement=document.mozFullScreenElement:document.msFullscreenElement&&(t.fullscreenElement=document.msFullscreenElement),document.fullscreenEnabled?t.fullscreenEnabled=document.fullscreenEnabled:document.webkitFullscreenEnabled?t.fullscreenEnabled=document.webkitFullscreenEnabled:document.mozFullScreenEnabled?t.fullscreenEnabled=document.mozFullScreenEnabled:document.msFullscreenEnabled&&(t.fullscreenEnabled=document.msFullscreenEnabled),document.exitFullscreen?t.exitFullscreen=function(){document.exitFullscreen.call(document)}:document.webkitExitFullscreen?t.exitFullscreen=function(){document.webkitExitFullscreen.call(document)}:document.mozExitFullScreen?t.exitFullscreen=function(){document.mozExitFullScreen.call(document)}:document.msExitFullscreen&&(t.exitFullscreen=function(){document.msExitFullscreen.call(document)}),e.requestFullscreen?t.requestFullscreen=function(){e.requestFullscreen.call(e)}:e.webkitRequestFullscreen?t.requestFullscreen=function(){e.webkitRequestFullscreen.call(e)}:e.msRequestFullscreen?t.requestFullscreen=function(){e.msRequestFullscreen.call(e)}:e.mozRequestFullScreen&&(t.requestFullscreen=function(){e.mozRequestFullScreen.call(e)}),t}},typeof Skel=="undefined"&&(Skel={}),Skel.Observable=function(){this.listeners={}},Skel.Observable.prototype=Object.create(Object.prototype),Skel.Observable.prototype.indexOf=function(e,t){for(var n=0;n<this.listeners[e].length;n++)if(this.listeners[e][n]===t)return n;return!1},Skel.Observable.prototype.addEventListener=function(e,t){this.listeners[e]||(this.listeners[e]=[]);if(!t.respondToEvent)throw"Registered "+e+" listeners must implement the respondToEvent(String eventType, Skel.Observable observable)` function!";return this.indexOf(e,t)===!1&&this.listeners[e].push(t),this},Skel.Observable.prototype.removeEventListener=function(e,t){(i=this.indexOf(e,t))!==!1&&delete this.listeners[e][i]},Skel.Observable.prototype.notifyEventListeners=function(e){if(!this.listeners[e])return;for(var t=0;t<this.listeners[e].length;t++)this.listeners[e][t].respondToEvent.call(this.listeners[e][t],e,this)},typeof Skel=="undefined"&&(Skel={}),Skel.SimpleAnimator=function(e){var t=function(e,n){if(e instanceof Object&&n instanceof Object){for(var r in n)!!e[r]&&n[r]instanceof Object?t(e[r],n[r]):e[r]=n[r];return e}throw"Target and Source must both be plain objects in mergeOptions"};this.options=t({duration:400},e||{})},Skel.SimpleAnimator.prototype=Object.create(Object.prototype),Skel.SimpleAnimator.currentAnimations=[],Skel.SimpleAnimator.frameRate=80,Skel.SimpleAnimator.interval=null,Skel.SimpleAnimator.prototype.animate=function(e,t,n){for(var r=0;r<Skel.SimpleAnimator.currentAnimations.length;r++)if(e==Skel.SimpleAnimator.currentAnimations[r])return;var i=this,s=new Date,o=n||this.options.duration;Skel.SimpleAnimator.currentAnimations.push(function(){var n=new Date-s,r=n/o;return r>1&&(r=1),e(i.deltaFunction(r)),r==1?(t&&t.call(i),!1):!0}),Skel.SimpleAnimator.__startTimer()},Skel.SimpleAnimator.prototype.deltaFunction=function(e){return Skel.SimpleAnimator.cubicEase(e)},Skel.SimpleAnimator.__startTimer=function(){if(Skel.SimpleAnimator.interval!=null)return;Skel.SimpleAnimator.interval=setInterval(function(){var e=0;while(e<Skel.SimpleAnimator.currentAnimations.length)Skel.SimpleAnimator.currentAnimations[e]()?e++:Skel.SimpleAnimator.currentAnimations.splice(e,1);e==0&&(clearInterval(Skel.SimpleAnimator.interval),Skel.SimpleAnimator.interval=null)},Math.round(1e3/Skel.SimpleAnimator.frameRate))},Skel.SimpleAnimator.__stopTimer=function(){if(Skel.SimpleAnimator.interval==null)return;stopInterval(Skel.SimpleAnimator.interval),Skel.SimpleAnimator.interval=null},Skel.SimpleAnimator.prototype.stopAll=function(){Skel.SimpleAnimator.currentAnimations=[]},Skel.SimpleAnimator.cubicEase=function(e){return e<.5?4*Math.pow(e,3):4*Math.pow(e-1,3)+1},Skel.SimpleAnimator.linear=function(e){return e},typeof Skel=="undefined"&&(Skel={}),Skel.SelectionManager=function(e,t){Skel.Observable.call(this);if(e instanceof HTMLElement){var n=function(e,t){if(e instanceof Object&&t instanceof Object){for(var r in t)!!e[r]&&t[r]instanceof Object?n(e[r],t[r]):e[r]=t[r];return e}throw"Target and Source must both be plain objects in mergeOptions"};this.options=n({selectedClass:"selected",itemsContainerClass:"items-container",controlForwardClass:"control forward",controlBackwardClass:"control backward",itemClass:"item",squelchWarnings:!1},t||{}),this.controls={forward:[],backward:[]},this.itemSelectionChangeListeners=[],this.itemClickListeners=[],this.container=e,this.itemsContainer=e.getElementsByClassName(this.options.itemsContainerClass);if(this.itemsContainer.length==0)throw"Couldn't find any element with class `"+this.options.itemsContainerClass+"`! This should be a div that contains the collection of items.";this.itemsContainer=this.itemsContainer[0];var r=e.getElementsByClassName(this.options.controlForwardClass),i=e.getElementsByClassName(this.options.controlBackwardClass);this.items=e.getElementsByClassName(this.options.itemClass);var s;for(s=0;s<r.length;s++)this.registerControl("forward",r[s]);for(s=0;s<i.length;s++)this.registerControl("backward",i[s]);for(s=0;s<this.items.length;s++)this.mapClickEvent("onItemClick",this.items[s]);return this.previousItem=null,this.selectedItem=null,this.currentIndex=null,this.scrollAnimator=null,this}throw"'container' must be an HTMLElement object!"},Skel.SelectionManager.prototype=Object.create(Skel.Observable.prototype),Skel.SelectionManager.prototype.sanityCheck=function(){var e,t;getComputedStyle?e=getComputedStyle(this.itemsContainer).getPropertyValue("display"):this.itemsContainer.currentStyle&&(e=this.itemsContainer.currentStyle.display);if(e=="static"){t="WARNING: The items container (."+this.options.itemsContainerClass+") must be an 'offset Parent' in order for the thumbnail selection scroll to work correctly! To be an offset parent, it must have `display` set to anything other than 'static'";if(!this.options.squelchWarnings)throw t;console.log(t)}},Skel.SelectionManager.prototype.registerControl=function(e,t){this.controls[e]||(this.controls[e]=[]);for(var n=0;n<this.controls[e].length;n++)if(this.controls[e][n]==t)break;if(n==this.controls[e].length){var r=this,i="on"+e.substr(0,1).toUpperCase()+e.substr(1)+"Click";this.controls[e].push(t),this.mapClickEvent(i,t)}return this},Skel.SelectionManager.prototype.mapClickEvent=function(e,t){var n=this;if(!this[e])throw"Error: There are no handlers for `"+e+"` on this object.";return t.addEventListener("click",function(t){n[e].call(n,t.target)}),this},Skel.SelectionManager.prototype.onForwardClick=function(e){this.scroll(1)},Skel.SelectionManager.prototype.onBackwardClick=function(e){this.scroll(-1)},Skel.SelectionManager.prototype.onItemClick=function(e){this.selectItem(e),this.notifyEventListeners("itemClick")},Skel.SelectionManager.prototype.scroll=function(e,t){throw"`scroll` is an abstract function that must be implemented. (You may want to use `ScrollingSelectionManager` instead.)"},Skel.SelectionManager.prototype.selectItem=function(e){if(!(e instanceof HTMLElement))throw"selectItem: `elmt` must be an HTMLElement.";if(this.selectedItem){if(this.selectedItem.isSameNode(e)){this.scroll(null,this.selectedItem);return}this.deselectItem(this.selectedItem,!0)}e.className+=" "+this.options.selectedClass,this.selectedItem=e,this.scroll(null,this.selectedItem),this.notifyEventListeners("itemSelectionChange")},Skel.SelectionManager.prototype.deselectItem=function(e,t){if(!(e instanceof HTMLElement))throw"deselectItem: `elmt` must be an HTMLElement.";e.className=(" "+e.className+" ").replace(new RegExp(" "+this.options.selectedClass+" "),"").trim(),e.isSameNode(this.selectedItem)&&(this.previousItem=this.selectedItem,this.selectedItem=null,t||this.notifyEventListeners(itemSelectionChange))},Skel.SelectionManager.prototype.selectItemByIndex=function(e){if(!this.items[e])throw"Invalid index passed to `Skel.SelectionManager.selectItemByIndex`: '"+e+"' when there are "+this.items.length+" items in the collection";return this.selectItem(this.items[e]),this},Skel.SelectionManager.prototype.getIndexOf=function(e){if(!e)return-1;for(var t=this.items.length-1;t>=0;t--)if(this.items[t].isSameNode(e))return t;return t},Skel.ScrollingSelectionManager=function(e,t){Skel.SelectionManager.call(this,e,t)},Skel.ScrollingSelectionManager.prototype=Object.create(Skel.SelectionManager.prototype),Skel.ScrollingSelectionManager.prototype.scroll=function(e,t){var n=this;e*=-1;var r=(this.itemsContainer.scrollWidth-this.container.clientWidth)*-1,i=0,s,o,u;getComputedStyle?o=getComputedStyle(this.itemsContainer).getPropertyValue("margin-left"):this.itemsContainer.currentStyle&&(o=this.itemsContainer.currentStyle.marginLeft);var a=/^(-?[\d.]+)(\D*)$/,f=a.exec(o);if(!f)throw"currentMargin set to amount that we don't know how to handle ("+o+")";var l=f[2];o=f[1]*1;if(t){if(!(t instanceof HTMLElement))throw"`item` passed to Skel.SelectionManager.scroll must be an HTML element within the selection manager's collection";s=(t.offsetLeft+t.scrollWidth/2+o-this.container.clientWidth/2)*-1}else s=this.container.clientWidth*.75,s*=e;var u=o+s;return u>i?u=i:u<r&&(u=r),this.scrollAnimator?this.scrollAnimator.animate(function(e){if(u==o)return;var t=u-o,r=t*e;n.itemsContainer.style.marginLeft=o*1+r*1+l}):this.itemsContainer.style.marginLeft=u+l,this},Skel.FadingSelectionManager=function(e,t){Skel.SelectionManager.call(this,e,t)},Skel.FadingSelectionManager.prototype=Object.create(Skel.SelectionManager.prototype),Skel.FadingSelectionManager.prototype.scroll=function(e,t){var n=this,r,i,s,o,u;if(!t)if(this.selectedItem){r=this.getIndexOf(this.selectedItem)*1,r+=e*1;if(r<0||r>=this.items.length)return;t=this.items[r]}else{if(!this.items.length)return;t=this.items[0],r=0}return this.selectItem(t),i=this.getIndexOf(this.previousItem),o=this.selectedItem,u=this.previousItem,this.scrollAnimator?this.scrollAnimator.animate(function(e){o&&(o.style.opacity=Math.abs(0-e)),u&&(u.style.opacity=1-e)},null,500):(u.style.opacity=0,o.style.opacity=1),this},Skel.FadingSelectionManager.prototype.onItemClick=function(e){this.notifyEventListeners("itemClick")},typeof Skel=="undefined"&&(Skel={}),Skel.ImageViewer=function(){return Skel.Observable.call(this),this},Skel.ImageViewer.prototype=Object.create(Skel.Observable.prototype),Skel.ImageViewer.prototype.constructor=Skel.ImageViewer,Skel.ImageViewer.prototype.thumbManagers=[],Skel.ImageViewer.prototype.canvasManagers=[],Skel.ImageViewer.prototype.currentIndex=null,Skel.ImageViewer.prototype.respondToEvent=function(e,t){if(e=="itemSelectionChange"&&t instanceof Skel.SelectionManager){var n=t.getIndexOf(t.selectedItem);if(n!=this.currentIndex){this.currentIndex=n;for(var r=0;r<this.canvasManagers.length;r++)this.canvasManagers[r]!==t&&this.canvasManagers[r].selectItemByIndex(n);for(var r=0;r<this.thumbManagers.length;r++)this.thumbManagers[r]!==t&&this.thumbManagers[r].selectItemByIndex(n);this.notifyEventListeners("itemSelectionChange",this)}}},Skel.ImageViewer.prototype.registerThumbnailManager=function(e){if(!(e instanceof Skel.SelectionManager))throw"Thumbnail manager must be of type SelectionManager or descendent";e.addEventListener("itemSelectionChange",this),this.thumbManagers.push(e)},Skel.ImageViewer.prototype.registerCanvasManager=function(e){e.addEventListener("itemSelectionChange",this),this.canvasManagers.push(e)};